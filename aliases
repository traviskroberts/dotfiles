# all-purpose aliases
alias h="cd ~"
alias c="clear && printf '\e]0;\a'"
alias hc="cd ~ && clear && printf '\e]0;\a'"
alias ll="ls -lhF"
alias lla="ls -lAhF"
alias ..="cd .."
alias ...="cd ../.."
alias apache="sudo /usr/sbin/apachectl"
alias dir_size="du -sh"
alias flush_cache="dscacheutil -flushcache"
alias updatedb="sudo /usr/libexec/locate.updatedb"
alias kat="pygmentize -f terminal -g"
alias tf="terraform"

# rails
alias migrate="rake db:migrate && rake db:test:prepare"
alias gr="rake routes | grep"

# rails server (2.x and 3.x)
function rs {
  if [ -e script/rails ]; then
    bundle exec rails server $@
  else
    script/server $@
  fi
}

# rails console (2.x and 3.x)
function rc {
  if [ -e script/rails ]; then
    bundle exec rails console $@
  else
    script/console $@
  fi
}

# rails generate (2.x and 3.x)
function rg {
  if [ -e script/rails ]; then
    bundle exec rails generate $@
  else
    script/generate $@
  fi
}

# rails bundle exec
function be {
  bundle exec $@
}

function resetdb {
  if [[ $1 == '-f' ]] || [[ $1 == '--full' ]]; then
    echo "DB Reset (full)"
    bundle exec rake log:clear db:reset
    export FULL=1
    bundle exec rake seed:channels seed:games seed:videos seed:youtube_videos seed:discover_modules seed:mixes seed:recommendation_tiles seed:randomizer_tiles
  elif [[ $1 == '-s' ]] || [[ $1 == '--simple' ]]; then
    echo "DB Reset (simple)"
    bundle exec rake log:clear db:drop db:create db:schema:load
  else
    echo "DB Reset"
    bundle exec rake log:clear db:reset seed:discover_modules seed:recommendation_tiles seed:randomizer_tiles
  fi

  echo "Preparing Test DB"
  bundle exec rake db:test:prepare
}
