# all-purpose aliases
alias h="cd ~"
alias c="clear"
alias hc="cd ~ && clear"
alias ll="ls -lhF"
alias lla="ls -lahF"
alias ..="cd .."
alias df="source ~/.bash_profile"
alias mdf="mate ~/bin/dotfiles"
alias apache="sudo /opt/local/apache2/bin/apachectl"
alias dir_size="du -sh"
alias flush_cache="dscacheutil -flushcache"

# mysql
alias mysqlstart="sudo /opt/local/share/mysql5/mysql/mysql.server start"
alias mysqlstop="/opt/local/bin/mysqladmin5 -u root -p shutdown"
alias mysqladmin="/opt/local/bin/mysqladmin5"

# to start all services when rebooted (launchd causes problems)
alias startservices="sudo /opt/local/apache2/bin/apachectl start && sudo /opt/local/share/mysql5/mysql/mysql.server start && sudo postfix start"

# svn
alias up="svn update"
alias st="svn status --quiet --ignore-externals"
alias sta="svn status --ignore-externals"
alias ci="svn commit -m"
alias add="svn add"
alias ignore="svn propedit svn:ignore"
alias add_all="svn st | grep '^\?' | awk '{print \$2}' | xargs svn add"
alias rm_all="svn st | grep '^\!' | awk '{print \$2}' | xargs svn rm"
alias reset="svn st | grep '^\?' | awk '{print \$2}' | xargs rm -rf"
alias svn_delete="find . -type d -name .svn | xargs rm -rf"
alias externals="svn propedit svn:externals"
alias ignore="svn propedit svn:ignore"

# git-svn
alias gs="git svn"
alias gsr="git svn rebase"
alias gsd="git svn dcommit"
alias gsf="git svn fetch"

# git
alias glog="git log --oneline --all --graph --decorate -n 20"
alias gco="git checkout"
alias gb="git branch"

# rails
alias migrate="rake db:migrate"

# cucumber
alias cuke="cucumber -f pretty"

# symfony
alias s="php symfony"
alias scc="php symfony cache:clear"
alias dba="php symfony doctrine:build --all --no-confirmation"
alias dbar="php symfony doctrine:build-all-reload --no-confirmation"
alias dbal="php symfony doctrine:build --all --and-load=data/fixtures/ --no-confirmation"
alias dbat="php symfony doctrine:build --all --env=test --and-load=test/fixtures/ --no-confirmation"
alias dbuild="php symfony doctrine:build-model && php symfony doctrine:build-form && php symfony doctrine:build-filter && php symfony doctrine:build-sql"
alias dbac="php symfony doctrine:build --all-classes"
alias fix="php symfony doctrine:data-load data/fixtures/"
alias tfix="php symfony doctrine:data-load test/fixtures/ --env=test"

# s3
alias s3="/usr/lib/s3sync/s3cmd.rb"

# rails server (2.x and 3.x)
function ss {
  if [ -e script/rails ]; then
    script/rails server $@
  else
    script/server $@
  fi
}

# rails console (2.x and 3.x)
function sc {
  if [ -e script/rails ]; then
    script/rails console $@
  else
    script/console $@
  fi
}

# rails generate (2.x and 3.x)
function sg {
  if [ -e script/rails ]; then
    script/rails generate $@
  else
    script/generate $@
  fi
}

# scp given path from staging server
function scp_staging() {
  scp staging:$1 ./
}

# Commit pending changes and quote all args as message
function gg() { 
    git commit -a -m "$*"
}

# switch to centresource projects dir
function cs() {
  cd ~/sfprojects/$1/
}

# switch to apacheprojects dir
function ap() {
  cd ~/apacheprojects/$1/
}

# get a list of routes (symfony or rails)
function routes() {
  if [ -f symfony ];
  then
    php symfony app:routes $1
  else
    rake routes
  fi
}

# run an 'ls' on a svn dir
function sls() {
  svn ls http://svn.centresource.com/$1/$2
}

function logdebug() {
  # The first argument is the application (default: frontend)
  export app=$1

  if [ ! -n "$app" ]; then
    export app="frontend"
  fi

  # The second argument is the environment.  (default: dev)
  export env=$2

  if [ ! -n "$env" ]; then
    export env="dev"
  fi

  # The third argument is the grep command.  (default: debug)
  export grep=$3

  if [ ! -n "$grep" ]; then
    export grep="debug"
  fi

  export u="_"
  export file=$app$u$env.log

  echo "tailing $file..."
  echo ""
  tail -f log/$file | grep $grep
}